<!-- ================= JS FILE SIDE PANEL ================= -->
<style>
    /* Shrinks main content when panel is open */
    body.panel-open {
        margin-right: 40%;
        transition: margin-right 0.3s ease;
    }
    body {
        transition: margin-right 0.3s ease;
    }

    /* Floating button - bottom right corner */
    #jsToggleBtn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background-color: #22c55e;
        color: white;
        border: none;
        padding: 14px 20px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 15px;
        font-weight: 700;
        box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
        z-index: 1000;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    #jsToggleBtn:hover {
        background-color: #16a34a;
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(34, 197, 94, 0.5);
    }

    /* Side panel */
    #jsPanel {
        position: fixed;
        top: 0;
        right: -40%;
        width: 40%;
        height: 100%;
        background-color: #1e293b;
        z-index: 999;
        transition: right 0.3s ease;
        display: flex;
        flex-direction: column;
        box-shadow: -5px 0 20px rgba(0,0,0,0.3);
    }
    #jsPanel.open {
        right: 0;
    }

    /* Panel header */
    #jsPanelHeader {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background-color: #0f172a;
        border-bottom: 2px solid #22c55e;
        flex-shrink: 0;
    }
    #jsPanelTitle {
        color: #22c55e;
        font-size: 15px;
        font-weight: 700;
        font-family: monospace;
    }
    #jsPanelClose {
        background: none;
        border: none;
        color: #94a3b8;
        font-size: 22px;
        cursor: pointer;
        padding: 0 5px;
        line-height: 1;
        transition: color 0.2s;
    }
    #jsPanelClose:hover {
        color: white;
    }

    /* Code area */
    #jsPanelCode {
        overflow-y: auto;
        flex: 1;
        padding: 20px;
        margin: 0;
        font-family: monospace;
        font-size: 13px;
        line-height: 1.7;
        color: #e2e8f0;
        white-space: pre;
    }

    /* Syntax highlighting colors */
    .js-keyword   { color: #c084fc; }
    .js-string    { color: #86efac; }
    .js-comment   { color: #94a3b8; font-style: italic; }
    .js-number    { color: #fb923c; }
    .js-function  { color: #60a5fa; }
</style>

<!-- Floating Button -->
<button id="jsToggleBtn">
    <span>{ }</span>
    <span id="jsToggleBtnText">View JS File</span>
</button>

<!-- Side Panel -->
<div id="jsPanel">
    <div id="jsPanelHeader">
        <span id="jsPanelTitle">üìÑ loading...</span>
        <button id="jsPanelClose">‚úï</button>
    </div>
    <pre id="jsPanelCode">Loading...</pre>
</div>

<script>
    // ---- CHANGE THIS TO YOUR JS FILE NAME ----
    const jsFileName = "javascript-basics.js";
    // ------------------------------------------

    const panel     = document.getElementById("jsPanel");
    const toggleBtn = document.getElementById("jsToggleBtn");
    const btnText   = document.getElementById("jsToggleBtnText");
    const closeBtn  = document.getElementById("jsPanelClose");
    const codeEl    = document.getElementById("jsPanelCode");
    const titleEl   = document.getElementById("jsPanelTitle");

    let loaded = false;

    // Simple syntax highlighter
    function highlight(code) {
        // Escape HTML first
        code = code.replace(/&/g, "&amp;")
                   .replace(/</g, "&lt;")
                   .replace(/>/g, "&gt;");

        // Comments (must come first)
        code = code.replace(/(\/\/[^\n]*)/g,
            '<span class="js-comment">$1</span>');

        // Strings
        code = code.replace(/(&quot;|&#x27;|`)(.*?)\1/g,
            '<span class="js-string">$1$2$1</span>');

        // Keywords
        const keywords = /\b(const|let|var|function|return|if|else|for|while|class|new|this|typeof|import|export|default|async|await|try|catch|finally|throw|switch|case|break|extends|super|static|of|in|true|false|null|undefined|=&gt;)\b/g;
        code = code.replace(keywords,
            '<span class="js-keyword">$1</span>');

        // Numbers
        code = code.replace(/\b(\d+\.?\d*)\b/g,
            '<span class="js-number">$1</span>');

        return code;
    }

    // Open/close panel
    function togglePanel() {
        const isOpen = panel.classList.contains("open");

        if (isOpen) {
            panel.classList.remove("open");
            document.body.classList.remove("panel-open");
            btnText.textContent = "View JS File";
        } else {
            panel.classList.add("open");
            document.body.classList.add("panel-open");
            btnText.textContent = "Close JS File";

            // Load file only once
            if (!loaded) {
                titleEl.textContent = "üìÑ " + jsFileName;
                fetch(jsFileName)
                    .then(res => {
                        if (!res.ok) throw new Error("File not found");
                        return res.text();
                    })
                    .then(code => {
                        codeEl.innerHTML = highlight(code);
                        loaded = true;
                    })
                    .catch(() => {
                        codeEl.textContent = "‚ùå Could not load " + jsFileName + "\nMake sure the file is in the same folder as this HTML file.";
                    });
            }
        }
    }

    toggleBtn.addEventListener("click", togglePanel);
    closeBtn.addEventListener("click", togglePanel);
</script>
